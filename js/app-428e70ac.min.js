!function(t){var e={};function o(r){if(e[r])return e[r].exports;var n=e[r]={i:r,l:!1,exports:{}};return t[r].call(n.exports,n,n.exports,o),n.l=!0,n.exports}o.m=t,o.c=e,o.d=function(t,e,r){o.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:r})},o.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},o.t=function(t,e){if(1&e&&(t=o(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var r=Object.create(null);if(o.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var n in t)o.d(r,n,function(e){return t[e]}.bind(null,n));return r},o.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return o.d(e,"a",e),e},o.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},o.p="",o(o.s=1)}([function(t,e,o){t.exports=o.p+"images/bg-44affdef.jpg"},function(t,e,o){"use strict";function r(t,e){for(var o=0;o<e.length;o++){var r=e[o];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}o.r(e);var n=function(){function t(e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t);var o=e.width,r=e.height,n=e.row,i=e.col;this.width=o,this.height=r,this.row=n,this.col=i,this.$el=document.createElement("div"),this.render()}var e,o,n;return e=t,(o=[{key:"render",value:function(){var t=this.$el,e=this.width,o=this.height,r=this.row,n=this.col,i=e/n,a=o/r;Object.assign(t.style,{position:"relative",display:"table",pointerEvents:"none"});for(var s=0;s<r;s++){var h=document.createElement("div");Object.assign(h.style,{display:"table-row"});for(var c=0;c<n;c++){var l=document.createElement("div");Object.assign(l.style,{display:"table-cell",width:i+"px",height:a+"px",border:"1px solid #fff",boxSizing:"border-box"}),h.appendChild(l)}t.appendChild(h)}}}])&&r(e.prototype,o),n&&r(e,n),t}();function i(t,e){for(var o=0;o<e.length;o++){var r=e[o];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}var a=function(){function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.arrow={left:void 0,top:void 0,right:void 0,bottom:void 0}}var e,o,r;return e=t,(o=[{key:"setArrow",value:function(t){var e=t.left,o=t.right,r=t.top,n=t.bottom;this.arrow={left:e,right:o,top:r,bottom:n}}}])&&i(e.prototype,o),r&&i(e,r),t}();function s(t){return(s="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function h(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function c(t,e){return!e||"object"!==s(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function l(t){return(l=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function u(t,e){return(u=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}var f=function(t){function e(){return h(this,e),c(this,l(e).apply(this,arguments))}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&u(t,e)}(e,t),e}(a),p=(["Win32","Windows"].includes(navigator.platform),["Mac68K","MacPPC","Macintosh","MacIntel"].includes(navigator.platform),/Chrome/.test(navigator.userAgent),/Firefox/.test(navigator.userAgent),/Safari/.test(navigator.userAgent),/Edge/.test(navigator.userAgent),/MicroMessenger/i.test(navigator.userAgent),/Android/i.test(navigator.userAgent)),w=/ipad|iphone/i.test(navigator.userAgent),d=p||w;window.top,window;var g=d?"touchstart":"click",b={mousedown:d?"touchstart":"mousedown",mousemove:d?"touchmove":"mousemove",mouseup:d?"touchend":"mouseup"};function m(t){return(m="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function v(t,e){for(var o=0;o<e.length;o++){var r=e[o];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function y(t,e){return!e||"object"!==m(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function x(t){return(x=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function P(t,e){return(P=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}var O=function(t){function e(t){var o;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),o=y(this,x(e).call(this));var r=t.sourcePos,n=t.width,i=t.height,a=t.img,s=t.imgWidth,h=t.imgHeight,c=t.parent;return o.sourcePos=r,o.nowPos=[],o.img=a,o.imgWidth=s,o.imgHeight=h,o.width=n,o.height=i,o.parent=c,o.$el=document.createElement("canvas"),o.render(),o.bindEvent(),o}var o,r,n;return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&P(t,e)}(e,t),o=e,(r=[{key:"render",value:function(){var t=this.$el,e=this.img,o=this.sourcePos,r=this.imgWidth,n=this.imgHeight,i=this.width,a=this.height,s=t.getContext("2d");t.className="block",t.width=i,t.height=a,s.drawImage(e,o[0]*r,o[1]*n,r,n,0,0,i,a)}},{key:"setPos",value:function(t,e){this.nowPos=[t,e],Object.assign(this.$el.style,{position:"absolute",left:this.nowPos[0]*this.width+"px",top:this.nowPos[1]*this.height+"px"})}},{key:"bindEvent",value:function(){var t=this,e=this.$el;e.addEventListener(b.mousedown,(function(o){o.preventDefault();var r=e.offsetLeft,n=e.offsetTop,i=o.pageX||o.touches[0].pageX,a=o.pageY||o.touches[0].pageY,s=i,h=a,c=function(o){var i=o.pageX||o.touches[0].pageX,a=o.pageY||o.touches[0].pageY,c=i-s,l=a-h,u=r,p=n;t.arrow.left instanceof f&&c<0?u=r+Math.max(c,-t.width):t.arrow.right instanceof f&&c>0?u=r+Math.min(c,t.width):t.arrow.top instanceof f&&l<0?p=n+Math.max(l,-t.height):t.arrow.bottom instanceof f&&l>0&&(p=n+Math.min(l,t.height)),Object.assign(e.style,{left:u+"px",top:p+"px"})};document.addEventListener(b.mousemove,c),document.addEventListener(b.mouseup,(function o(i){var a=i.pageX||i.changedTouches[0].pageX,l=i.pageY||i.changedTouches[0].pageY,u=a-s,p=l-h,w=r,d=n;t.arrow.left instanceof f&&u<0?(w=r-t.width,t.setAllArrow("left")):t.arrow.right instanceof f&&u>0?(w=r+t.width,t.setAllArrow("right")):t.arrow.top instanceof f&&p<0?(d=n-t.height,t.setAllArrow("top")):t.arrow.bottom instanceof f&&p>0&&(d=n+t.height,t.setAllArrow("bottom")),Object.assign(e.style,{left:w+"px",top:d+"px"}),w===r&&d===n||t.parent.isSuccess(),document.removeEventListener(b.mousemove,c),document.removeEventListener(b.mouseup,o)}))}))}},{key:"setAllArrow",value:function(t){var e=null,o=this.arrow.left,r=this.arrow.right,n=this.arrow.top,i=this.arrow.bottom;"left"===t||"right"===t?("left"===t?((e=this.arrow.left).arrow.left&&(e.arrow.left.arrow.right=this),this.arrow.right&&(this.arrow.right.arrow.left=e),this.arrow.left=e.arrow.left,this.arrow.right=e,e.arrow.left=this,e.arrow.right=r,this.nowPos[0]--):((e=this.arrow.right).arrow.right&&(e.arrow.right.arrow.left=this),this.arrow.left&&(this.arrow.left.arrow.right=e),this.arrow.left=e,this.arrow.right=e.arrow.right,e.arrow.left=o,e.arrow.right=this,this.nowPos[0]++),e.arrow.top&&(e.arrow.top.arrow.bottom=this),e.arrow.bottom&&(e.arrow.bottom.arrow.top=this),this.arrow.top&&(this.arrow.top.arrow.bottom=e),this.arrow.bottom&&(this.arrow.bottom.arrow.top=e),this.arrow.top=e.arrow.top,this.arrow.bottom=e.arrow.bottom,e.arrow.top=n,e.arrow.bottom=i):("top"===t?((e=this.arrow.top).arrow.top&&(e.arrow.top.arrow.bottom=this),this.arrow.bottom&&(this.arrow.bottom.arrow.top=e),this.arrow.top=e.arrow.top,this.arrow.bottom=e,e.arrow.top=this,e.arrow.bottom=i,this.nowPos[1]--):((e=this.arrow.bottom).arrow.bottom&&(e.arrow.bottom.arrow.top=this),this.arrow.top&&(this.arrow.top.arrow.bottom=e),this.arrow.bottom=e.arrow.bottom,this.arrow.top=e,e.arrow.bottom=this,e.arrow.top=n,this.nowPos[1]++),e.arrow.left&&(e.arrow.left.arrow.right=this),e.arrow.right&&(e.arrow.right.arrow.left=this),this.arrow.left&&(this.arrow.left.arrow.right=e),this.arrow.right&&(this.arrow.right.arrow.left=e),this.arrow.left=e.arrow.left,this.arrow.right=e.arrow.right,e.arrow.left=o,e.arrow.right=r)}}])&&v(o.prototype,r),n&&v(o,n),e}(a);function j(t,e){for(var o=0;o<e.length;o++){var r=e[o];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}var E=function(){function t(e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t);var o=e.img,r=e.width,n=e.height,i=e.row,a=e.col;this.img=o,this.width=r,this.height=n,this.row=i,this.col=a,this.$el=document.createElement("div"),this.blocks=[],this.render(),this.refresh()}var e,o,r;return e=t,(o=[{key:"render",value:function(){Object.assign(this.$el.style,{position:"relative",marginTop:"30px",background:"#756780",border:"3px solid #fff"}),this.renderBlocks(),this.renderBoard()}},{key:"renderBoard",value:function(){var t=this.width,e=this.height,o=this.row,r=this.col,i=new n({width:t,height:e,row:o,col:r});this.$el.appendChild(i.$el)}},{key:"renderBlocks",value:function(){for(var t=this.width,e=this.height,o=this.row,r=this.col,n=this.img,i=this.blocks,a=this.$el,s=t/r,h=e/o,c=n.width/r,l=n.height/o,u=0;u<o;u++)for(var p=0;p<r&&(u!==this.row-1||p!==this.col-1);p++){var w=new O({sourcePos:[p,u],width:s,height:h,img:n,imgWidth:c,imgHeight:l,parent:this});i.push(w),a.appendChild(w.$el)}i.push(new f)}},{key:"isSuccess",value:function(){var t=!0;this.blocks.forEach((function(e){e instanceof O&&(e.sourcePos[0]!==e.nowPos[0]||e.sourcePos[1]!==e.nowPos[1])&&(t=!1)})),t&&setTimeout((function(){alert("挑战成功")}),300)}},{key:"refresh",value:function(){for(var t=this.blocks.slice(0,-1).sort((function(){return Math.random()>.5?1:-1})),e=[],o=0;o<this.row;o++){for(var r=[],n=0;n<this.col;n++){if(o===this.row-1&&n===this.col-1){r.push(this.blocks[this.blocks.length-1]);break}var i=t[0];i.setPos(n,o),r.push(i),t.shift()}e.push(r)}e.forEach((function(t,o){t.forEach((function(r,n){var i={left:t[n-1],right:t[n+1],top:(e[o-1]||[])[n],bottom:(e[o+1]||[])[n]};r.setArrow(i)}))}))}}])&&j(e.prototype,o),r&&j(e,r),t}(),k=o(0),S=o.n(k),_=new Image;_.onload=function(){var t={img:this,width:300,height:300,row:4,col:4},e=window.pingTu=new E(t),o=document.querySelector("div"),r="\n        box-sizing: border-box;\n        display: flex;\n        align-items: center;\n        justify-content: center;\n        width: 110px;\n        height: 36px;\n        font-size: 16px;\n        color: #fff;\n        background: #6aae78;\n        border: 2px solid #fff;\n        border-radius: 18px;\n    ",n='\n        <div class="wrap">\n            <div style="'.concat("\n        display: flex;\n        align-items: center;\n        justify-content: space-between;\n    ",'">\n                <img style="').concat("\n        box-sizing: border-box;\n        width: 160px;\n        border: 4px solid #fff;\n    ",'" src=').concat(S.a,'>\n                <div style="').concat("\n        display: flex;\n        flex-direction: column;\n        justify-content: space-between;\n        height: 160px;\n    ",'">\n                    <span class="btnImg" style="').concat(r,'">更换图片</span>\n                    <span class="btnLevel" style="').concat(r,'">选择难度</span>\n                    <span class="btnReset" style="').concat(r,' background: #E6A153;">重新开始</span>\n                </div>\n            </div>\n        </div>\n    ');o.innerHTML=n,o.querySelector(".wrap").appendChild(e.$el),o.querySelector(".btnImg").addEventListener(g,(function(){alert("研发中，敬请期待")})),o.querySelector(".btnLevel").addEventListener(g,(function(){alert("研发中，敬请期待")})),o.querySelector(".btnReset").addEventListener(g,(function(){e.refresh()})),w&&o.addEventListener("touchstart",(function(t){return t.preventDefault()}))},_.src=S.a}]);