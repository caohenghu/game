!function(t){var o={};function r(e){if(o[e])return o[e].exports;var n=o[e]={i:e,l:!1,exports:{}};return t[e].call(n.exports,n,n.exports,r),n.l=!0,n.exports}r.m=t,r.c=o,r.d=function(t,o,e){r.o(t,o)||Object.defineProperty(t,o,{enumerable:!0,get:e})},r.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},r.t=function(t,o){if(1&o&&(t=r(t)),8&o)return t;if(4&o&&"object"==typeof t&&t&&t.__esModule)return t;var e=Object.create(null);if(r.r(e),Object.defineProperty(e,"default",{enumerable:!0,value:t}),2&o&&"string"!=typeof t)for(var n in t)r.d(e,n,function(o){return t[o]}.bind(null,n));return e},r.n=function(t){var o=t&&t.__esModule?function(){return t.default}:function(){return t};return r.d(o,"a",o),o},r.o=function(t,o){return Object.prototype.hasOwnProperty.call(t,o)},r.p="",r(r.s=1)}([function(t,o,r){t.exports=r.p+"images/bg-44affdef.jpg"},function(t,o,r){"use strict";function e(t,o){for(var r=0;r<o.length;r++){var e=o[r];e.enumerable=e.enumerable||!1,e.configurable=!0,"value"in e&&(e.writable=!0),Object.defineProperty(t,e.key,e)}}r.r(o);var n=function(){function t(o){!function(t,o){if(!(t instanceof o))throw new TypeError("Cannot call a class as a function")}(this,t);var r=o.width,e=o.height,n=o.row,i=o.col;this.width=r,this.height=e,this.row=n,this.col=i,this.canvas=document.createElement("canvas"),this.render()}var o,r,n;return o=t,(r=[{key:"render",value:function(){var t=this.canvas,o=this.width,r=this.height,e=this.row,n=this.col,i=t.getContext("2d");t.width=o+1,t.height=r+1,Object.assign(t.style,{position:"relative",pointerEvents:"none"}),i.strokeStyle="green";for(var a=0;a<=e;a++){var s=a*r/e+.5;i.moveTo(0,s),i.lineTo(o,s),i.stroke()}for(var h=0;h<=n;h++){var c=h*o/n+.5;i.moveTo(c,0),i.lineTo(c,o),i.stroke()}}}])&&e(o.prototype,r),n&&e(o,n),t}();function i(t,o){for(var r=0;r<o.length;r++){var e=o[r];e.enumerable=e.enumerable||!1,e.configurable=!0,"value"in e&&(e.writable=!0),Object.defineProperty(t,e.key,e)}}var a=function(){function t(){!function(t,o){if(!(t instanceof o))throw new TypeError("Cannot call a class as a function")}(this,t),this.arrow={left:void 0,top:void 0,right:void 0,bottom:void 0}}var o,r,e;return o=t,(r=[{key:"setArrow",value:function(t){var o=t.left,r=t.right,e=t.top,n=t.bottom;this.arrow={left:o,right:r,top:e,bottom:n}}}])&&i(o.prototype,r),e&&i(o,e),t}();function s(t){return(s="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function h(t,o){if(!(t instanceof o))throw new TypeError("Cannot call a class as a function")}function c(t,o){return!o||"object"!==s(o)&&"function"!=typeof o?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):o}function u(t){return(u=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function f(t,o){return(f=Object.setPrototypeOf||function(t,o){return t.__proto__=o,t})(t,o)}var l=function(t){function o(){return h(this,o),c(this,u(o).apply(this,arguments))}return function(t,o){if("function"!=typeof o&&null!==o)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(o&&o.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),o&&f(t,o)}(o,t),o}(a),w=(["Win32","Windows"].includes(navigator.platform),["Mac68K","MacPPC","Macintosh","MacIntel"].includes(navigator.platform),/Chrome/.test(navigator.userAgent),/Firefox/.test(navigator.userAgent),/Safari/.test(navigator.userAgent),/Edge/.test(navigator.userAgent),/MicroMessenger/i.test(navigator.userAgent),/Android/i.test(navigator.userAgent)),p=/ipad|iphone/i.test(navigator.userAgent),g=w||p;window.top,window;var d={mousedown:g?"touchstart":"mousedown",mousemove:g?"touchmove":"mousemove",mouseup:g?"touchend":"mouseup"};function v(t){return(v="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function m(t,o){for(var r=0;r<o.length;r++){var e=o[r];e.enumerable=e.enumerable||!1,e.configurable=!0,"value"in e&&(e.writable=!0),Object.defineProperty(t,e.key,e)}}function b(t,o){return!o||"object"!==v(o)&&"function"!=typeof o?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):o}function y(t){return(y=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function P(t,o){return(P=Object.setPrototypeOf||function(t,o){return t.__proto__=o,t})(t,o)}var O=function(t){function o(t){var r;!function(t,o){if(!(t instanceof o))throw new TypeError("Cannot call a class as a function")}(this,o),r=b(this,y(o).call(this));var e=t.sourcePos,n=t.width,i=t.height,a=t.img,s=t.imgWidth,h=t.imgHeight,c=t.parent;return r.sourcePos=e,r.nowPos=[],r.img=a,r.imgWidth=s,r.imgHeight=h,r.width=n,r.height=i,r.parent=c,r.canvas=document.createElement("canvas"),r.render(),r.bindEvent(),r}var r,e,n;return function(t,o){if("function"!=typeof o&&null!==o)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(o&&o.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),o&&P(t,o)}(o,t),r=o,(e=[{key:"render",value:function(){var t=this.canvas,o=this.img,r=this.sourcePos,e=this.imgWidth,n=this.imgHeight,i=this.width,a=this.height,s=t.getContext("2d");t.width=i,t.height=a,s.drawImage(o,r[0]*e,r[1]*n,e,n,0,0,i,a)}},{key:"setPos",value:function(t,o){this.nowPos=[t,o],Object.assign(this.canvas.style,{position:"absolute",left:this.nowPos[0]*this.width+"px",top:this.nowPos[1]*this.height+"px"})}},{key:"bindEvent",value:function(){var t=this,o=this.canvas;o.addEventListener(d.mousedown,(function(r){r.preventDefault();var e=o.offsetLeft,n=o.offsetTop,i=r.pageX||r.touches[0].pageX,a=r.pageY||r.touches[0].pageY,s=i,h=a,c=function(r){var i=r.pageX||r.touches[0].pageX,a=r.pageY||r.touches[0].pageY,c=i-s,u=a-h,f=e,w=n;t.arrow.left instanceof l&&c<0?f=e+Math.max(c,-t.width):t.arrow.right instanceof l&&c>0?f=e+Math.min(c,t.width):t.arrow.top instanceof l&&u<0?w=n+Math.max(u,-t.height):t.arrow.bottom instanceof l&&u>0&&(w=n+Math.min(u,t.height)),Object.assign(o.style,{left:f+"px",top:w+"px"})};document.addEventListener(d.mousemove,c),document.addEventListener(d.mouseup,(function r(i){var a=i.pageX||i.changedTouches[0].pageX,u=i.pageY||i.changedTouches[0].pageY,f=a-s,w=u-h,p=e,g=n;t.arrow.left instanceof l&&f<0?(p=e-t.width,t.setAllArrow("left")):t.arrow.right instanceof l&&f>0?(p=e+t.width,t.setAllArrow("right")):t.arrow.top instanceof l&&w<0?(g=n-t.height,t.setAllArrow("top")):t.arrow.bottom instanceof l&&w>0&&(g=n+t.height,t.setAllArrow("bottom")),(p!==e||g!==n)&&(Object.assign(o.style,{transition:"all 0.1s",left:p+"px",top:g+"px"}),t.parent.isSuccess(),o.addEventListener("transitionend",(function t(){Object.assign(o.style,{transition:""}),o.removeEventListener("transitionend",t)}))),document.removeEventListener(d.mousemove,c),document.removeEventListener(d.mouseup,r)}))}))}},{key:"setAllArrow",value:function(t){var o=null,r=this.arrow.left,e=this.arrow.right,n=this.arrow.top,i=this.arrow.bottom;"left"===t||"right"===t?("left"===t?((o=this.arrow.left).arrow.left&&(o.arrow.left.arrow.right=this),this.arrow.right&&(this.arrow.right.arrow.left=o),this.arrow.left=o.arrow.left,this.arrow.right=o,o.arrow.left=this,o.arrow.right=e,this.nowPos[0]--):((o=this.arrow.right).arrow.right&&(o.arrow.right.arrow.left=this),this.arrow.left&&(this.arrow.left.arrow.right=o),this.arrow.left=o,this.arrow.right=o.arrow.right,o.arrow.left=r,o.arrow.right=this,this.nowPos[0]++),o.arrow.top&&(o.arrow.top.arrow.bottom=this),o.arrow.bottom&&(o.arrow.bottom.arrow.top=this),this.arrow.top&&(this.arrow.top.arrow.bottom=o),this.arrow.bottom&&(this.arrow.bottom.arrow.top=o),this.arrow.top=o.arrow.top,this.arrow.bottom=o.arrow.bottom,o.arrow.top=n,o.arrow.bottom=i):("top"===t?((o=this.arrow.top).arrow.top&&(o.arrow.top.arrow.bottom=this),this.arrow.bottom&&(this.arrow.bottom.arrow.top=o),this.arrow.top=o.arrow.top,this.arrow.bottom=o,o.arrow.top=this,o.arrow.bottom=i,this.nowPos[1]--):((o=this.arrow.bottom).arrow.bottom&&(o.arrow.bottom.arrow.top=this),this.arrow.top&&(this.arrow.top.arrow.bottom=o),this.arrow.bottom=o.arrow.bottom,this.arrow.top=o,o.arrow.bottom=this,o.arrow.top=n,this.nowPos[1]++),o.arrow.left&&(o.arrow.left.arrow.right=this),o.arrow.right&&(o.arrow.right.arrow.left=this),this.arrow.left&&(this.arrow.left.arrow.right=o),this.arrow.right&&(this.arrow.right.arrow.left=o),this.arrow.left=o.arrow.left,this.arrow.right=o.arrow.right,o.arrow.left=r,o.arrow.right=e)}}])&&m(r.prototype,e),n&&m(r,n),o}(a);function j(t,o){for(var r=0;r<o.length;r++){var e=o[r];e.enumerable=e.enumerable||!1,e.configurable=!0,"value"in e&&(e.writable=!0),Object.defineProperty(t,e.key,e)}}var k=function(){function t(o){!function(t,o){if(!(t instanceof o))throw new TypeError("Cannot call a class as a function")}(this,t);var r=o.img,e=o.width,n=o.height,i=o.row,a=o.col;this.img=r,this.width=e,this.height=n,this.row=i,this.col=a,this.div=document.createElement("div"),this.blocks=[],this.render(),this.refresh()}var o,r,e;return o=t,(r=[{key:"render",value:function(){Object.assign(this.div.style,{position:"relative",background:"#fff"}),this.renderBlocks(),this.renderBoard()}},{key:"renderBoard",value:function(){var t=this.width,o=this.height,r=this.row,e=this.col,i=new n({width:t,height:o,row:r,col:e});this.div.appendChild(i.canvas)}},{key:"renderBlocks",value:function(){for(var t=this.width,o=this.height,r=this.row,e=this.col,n=this.img,i=this.blocks,a=this.div,s=t/e,h=o/r,c=n.width/e,u=n.height/r,f=0;f<r;f++)for(var w=0;w<e&&(f!==this.row-1||w!==this.col-1);w++){var p=new O({sourcePos:[w,f],width:s,height:h,img:n,imgWidth:c,imgHeight:u,parent:this});i.push(p),a.appendChild(p.canvas)}i.push(new l)}},{key:"isSuccess",value:function(){var t=!0;this.blocks.forEach((function(o){o instanceof O&&(o.sourcePos[0]!==o.nowPos[0]||o.sourcePos[1]!==o.nowPos[1])&&(t=!1)})),t&&setTimeout((function(){alert("挑战成功")}),300)}},{key:"refresh",value:function(){for(var t=this.blocks.slice(),o=[],r=0;r<this.row;r++){for(var e=[],n=0;n<this.col;n++){if(r===this.row-1&&n===this.col-1){e.push(this.blocks[this.blocks.length-1]);break}var i=t[0];i.setPos(n,r),e.push(i),t.shift()}o.push(e)}o.forEach((function(t,r){t.forEach((function(e,n){var i={left:t[n-1],right:t[n+1],top:(o[r-1]||[])[n],bottom:(o[r+1]||[])[n]};e.setArrow(i)}))}))}}])&&j(o.prototype,r),e&&j(o,e),t}(),E=r(0),S=r.n(E),_=new Image;_.onload=function(){var t={img:this,width:300,height:300,row:4,col:4},o=window.pingTu=new k(t),r=document.querySelector(".app"),e=document.createElement("span");e.className="btn",e.textContent="重新开始",r.appendChild(e),r.appendChild(_),r.appendChild(o.div),e.addEventListener("click",(function(){o.refresh()}))},_.src=S.a}]);